<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="ftw.permissionmanager">

<body>
<metal:main fill-slot="main">

    <div metal:define-macro="main">

        <h1 class="documentFirstHeading" i18n:translate="label_remove_permissions">Berechtigungen eines Benutzers entfernen</h1>
        <a href=""
           class="link-parent" i18n:translate="label_back_to_overview"
           tal:attributes="href string:${here/absolute_url}/@@permission_manager">
            Zur&uuml;ck zur Berechtigungs-Verwaltung
        </a>

        <p class="documentDescription" i18n:translate="text_remove_permissions">
            Sie k&ouml;nnen die Berechtigungen eines Benutzers rekursiv entfernen.
        </p>

        <br />

        <p i18n:translate="lable_search_user">
            1. Benutzer suchen
        </p>

        <form method="post"
              tal:attributes="action string:${context/absolute_url}/@@remove_user_permissions">

            <input type="hidden" name="search_user:boolean" value="True" />

            <div class="field">
                <input type="text"
                       id="sharing-user-group-search"
                       size="30"
                       name="search_term"
                       title="Search for user or group"
                       i18n:attributes="title"
                       class="searchField inputLabel"
                       value=""
                       />
                <input type="submit"
                       name="form.button.Search"
                       value="Search"
                       class="searchButton allowMultiSubmit"
                       i18n:attributes="value box_search"
                       />
            </div>
        </form>

        <tal:search_results tal:condition="view/search">
            <div i18n:translate="label_choose_user">
                2. Benutzer ausw&auml;len
            </div>
            <table class="listing" tal:condition="view/search">
                <thead>
                    <tr>
                        <th i18n:translate="label_id">ID</th>
                        <th i18n:translate="label_title">Titel</th>
                        <th i18n:translate="label_typ">Typ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr tal:repeat="match view/search_results">
                        <td tal:content="match/id" />
                        <td>
                            <a tal:attributes="href string:${here/absolute_url}/@@remove_user_permissions?user=${match/id}"
                            tal:content="match/title"></a>
                        </td>
                        <td tal:content="python:(match['type']=='user' and 'Benutzer') or (match['type']=='group' and 'Gruppe') or match['type']" />
                    </tr>
                </tbody>
            </table>
        </tal:search_results>

        <tal:user_selected tal:condition="python:view.user_selected and not view.confirmed">
            <div i18n:translate="label_confirmation">
                3. Best&auml;tigen
            </div>

            <p class="portalMessage error">
                Sind Sie sicher, dass Sie dem Benutzer / der Gruppe
                <i tal:content="view/getUserOrGroupTitle"></i>
                (<tal:replace replace="view/user" />) <b>alle Berechtigungen</b>
                auf das Objekt &quot;<tal:replace replace="here/Title" />&quot; und alle
                untergeordneten Objekte <b>entfernen</b> wollen?
            </p>
            <p>
                <a tal:attributes="href string:${here/absolute_url}/@@remove_user_permissions?user=${view/user}&amp;confirmed=1"
                    class="context" i18n:translate="label_yes_delete">Ja, Berechtigungen l&ouml;schen</a>
                <a tal:attributes="href string:${here/absolute_url}/@@remove_user_permissions"
                    class="standalone" i18n:translate="label_no">Nein, abbrechen</a>
            </p>
        </tal:user_selected>

    </div>


</metal:main>
</body>
</html>
